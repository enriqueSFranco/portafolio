---
import { Image } from "astro:assets";

import type { DownloadLink, SocialProfile } from "@/shared/types";
import cv from "@/cv.json";
import me from "@/images/me.jpeg";
import TextHighlightKeywords from "@/ui/TextHighlightKeywords.astro";
import SocialLinks from "@/ui/SocialLinks.astro";
import CopyButton from "@/ui/CopyButton.astro";

const { name, profiles, summary } = cv.basic;

const downloadLink: DownloadLink = {
  href: "/cv.pdf",
  downloadName:
    "CV Salinas Franco Carlos Enrique Ingeniero en Sistemas Computacionales",
  text: "Descargar CV",
};
const profilesData = profiles as SocialProfile[];

const KEYWORD_CLASSES = {
  // Mapeo de palabra clave a la CLASE CSS definida en el paso 1
  "Desarrollador Frontend Jr": "highlight-frontend",
  "Ingeniería en Sistemas Computacionales": "highlight-engineer",
};
---

<style is:inline>
  /* Desarrollador Frontend Jr: Usaremos tonos Azules/Cian */
  .highlight-frontend {
    /* Modo Claro */
    color: #0b50d5; /* Azul sólido */
    background-color: rgba(
      186,
      230,
      253,
      0.5
    ); /* Fondo Azul claro transparente */
    backdrop-filter: blur(2px);
    padding: 0.2rem 0.4rem;
    border-radius: 0.5rem; /* Bordes redondeados tipo chip */
    font-weight: 600; /* Semi-bold para destacar */
  }

  /* Modo Oscuro */
  .dark .highlight-frontend {
    color: #58c4dc; /* Azul más claro para texto */
    background-color: #61dafb15; /* Fondo Azul oscuro transparente */
  }

  /* Ingeniería en Sistemas Computacionales: Usaremos tonos Púrpura/Magenta */
  .highlight-engineer {
    /* Modo Claro */
    color: #9333ea; /* Púrpura sólido */
    background-color: rgba(
      221,
      214,
      254,
      0.5
    ); /* Fondo Púrpura claro transparente */
    backdrop-filter: blur(2px);
    padding: 0.2rem 0.4rem;
    border-radius: 0.5rem;
    font-weight: 600;
  }

  /* Modo Oscuro */
  .dark .highlight-engineer {
    color: #a78bfa; /* Púrpura más claro para texto */
    background-color: rgba(
      126,
      34,
      206,
      0.4
    ); /* Fondo Púrpura oscuro transparente */
  }
</style>

<section
  aria-labelledby="hero-title"
  class="w-full font-light text-sm leading-normal flex flex-col justify-center gap-6"
>
  <div
    class="flex flex-col items-start gap-4 max-sm:items-center max-sm:justify-center"
  >
    <figure
      class="w-24 h-24 overflow-hidden rounded-md sm:w-28 sm:h-28 lg:w-32 lg:h-32 sm:mx-0"
    >
      <Image src={me} alt={`foto de ${name}`} />
    </figure>

    <h2
      id="hero-title"
      class="text-center text-gray-200 sm:text-left flex flex-col justify-start items-center sm:items-start leading-relaxed"
    >
      <span class="text-2xl tracking-tight sm:text-3xl lg:text-5xl font-medium">
        {name}
      </span>

      <span class="text-gray-300 text-base sm:text-base lg:text-xl font-medium">
        Desarrollador Frontend Jr
      </span>
    </h2>
  </div>

  <TextHighlightKeywords text={summary} keywords={KEYWORD_CLASSES} />

  <SocialLinks profiles={profilesData} downloadLink={downloadLink} />
</section>
