---
import { Image } from "astro:assets";

import cv from "../cv.json";
import type { DownloadLink, SocialProfile } from "@shared/types";
import me from "@assets/images/me.jpeg";
import TextHighlightKeywords from "@components/TextHighlightKeywords.astro";
import SocialLinks from "@components/SocialLinks.astro";

const { name, profiles, summary } = cv.basic;

const downloadLink: DownloadLink = {
  href: "/cv.pdf",
  downloadName:
    "CV Salinas Franco Carlos Enrique Ingeniero en Sistemas Computacionales",
  text: "Descargar CV",
};
const profilesData = profiles as SocialProfile[];

const KEYWORD_CLASSES = {
  "Desarrollador Frontend": "highlight-frontend",
  "Ingeniería en Sistemas Computacionales": "highlight-engineer",
};
---

<style is:inline>
  /* Desarrollador Frontend Jr: Usaremos tonos Azules/Cian */
  .highlight-frontend {
    /* Modo Claro */
    color: #0b50d5;
    background-color: #bae6fd80;
    padding: 0.2rem 0.4rem;
    border-radius: 0.5rem;
    font-weight: 600;
  }

  /* Modo Oscuro */
  .dark .highlight-frontend {
    color: #58c4dc;
    background-color: #61dafb15;
  }

  /* Ingeniería en Sistemas Computacionales: Usaremos tonos Púrpura/Magenta */
  .highlight-engineer {
    /* Modo Claro */
    color: #9333ea;
    background-color: #ddd6fe80;
    padding: 0.2rem 0.4rem;
    border-radius: 0.5rem;
    font-weight: 600;
  }

  /* Modo Oscuro */
  .dark .highlight-engineer {
    color: #a78bfa;
    background-color: #7e22ce2c;
  }



  /* ---- ANIMACIÓN HERO ---- */

/* Contenedor inicial invisible */
.hero-animate {
  opacity: 0;
  transform: translateY(24px);
  filter: blur(6px);
}

/* Estado final */
.hero-animate.show {
  opacity: 1;
  transform: translateY(0);
  filter: blur(0);
  transition:
    opacity 700ms ease,
    transform 700ms ease,
    filter 700ms ease;
}

/* Delay escalonado */
.delay-1 {
  transition-delay: 120ms;
}
.delay-2 {
  transition-delay: 240ms;
}
.delay-3 {
  transition-delay: 360ms;
}
.delay-4 {
  transition-delay: 480ms;
}

</style>

<section
  id="sobremi"
  aria-labelledby="hero-title"
  class="w-full min-h-screen font-light text-sm leading-relaxed flex flex-col items-center justify-center gap-6"
>
  <div class="flex flex-col items-center gap-6 max-w-2xl">

    <figure class="flex flex-col items-center hero-animate delay-1">
      <Image
        src={me}
        alt={`foto de ${name}`}
        class="size-72 sm:size-80 object-cover object-top mask-radial-at-center mask-radial-from-45% mask-radial-to-80%"
      />

      <figcaption class="flex flex-col items-center text-center hero-animate delay-2">
        <h1
          id="hero-title"
          class="text-3xl sm:text-4xl lg:text-5xl font-semibold tracking-tight leading-tight"
        >
          {name}
        </h1>
      </figcaption>
    </figure>

    <div class="prose prose-invert prose-zinc text-center text-sm md:text-base font-light max-w-xl hero-animate delay-3">
      <TextHighlightKeywords text={summary} keywords={KEYWORD_CLASSES} />
    </div>

    <div class="hero-animate delay-4">
      <SocialLinks profiles={profilesData} downloadLink={downloadLink} />
    </div>

  </div>
</section>


<script>
  window.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".hero-animate").forEach((el) => {
      requestAnimationFrame(() => el.classList.add("show"));
    });
  });
</script>
